{% extends 'base.html' %}
{% load widget_tweaks %} 
{% block title %}book title list{% endblock title %}

{% block content %}
    <h1>Book Title List</h1>
    <form action="" method="POST">
        {% csrf_token %}
        
        <div class="mb-2">
            <label for="{{ form.title.id_for_label }}" class="block font-bold text-slate-800 dark:text-slate-300">Title:</label>
            {{form.title|add_class:"bg-slate-100 dark:bg-slate-300 text-slate-800 rounded p-2 w-full"}}

            {% if messages %}
                {% for message in messages %}
                    <script>
                    Swal.fire({
                        icon: 'success',
                        title: 'Success!',
                        text: '{{ message }}',
                    });
                  </script>
                {% endfor %}
            {% endif %}

            {% if title_error %}
                <script>
                    Swal.fire({
                        icon: 'error',
                        title: 'Validation Error',
                        text: '{{ title_error.0 }}'
                    });
                </script>
            {% endif %}

            {% comment %} {% if success %}
                <script>
                    Swal.fire({
                        icon: 'success',
                        title: 'Success!',
                        text: 'Your book title was saved successfully!'
                    });
                </script>
            {% endif %} {% endcomment %}
        </div>

        <div class="mb-2">
            <label for="{{ form.author.id_for_label }}" class="block font-bold text-slate-800 dark:text-slate-300">Author:</label>
            {{form.author|add_class:"bg-slate-100 dark:bg-slate-300 text-slate-800 rounded p-2 w-full"}}
        </div>

        <div class="mb-2">
            <label for="{{ form.publisher.id_for_label }}" class="block font-bold text-slate-800 dark:text-slate-300">Publisher:</label>
            {{form.publisher|add_class:"bg-slate-100 dark:bg-slate-300 text-slate-800 rounded p-2 w-full"}}
        </div>

        <button type="submit" class="p-3 bg-blue-500 text-white">send</button>
    </form>

    {% if qs %}
        <ul>
            {% for el in qs %}
                <li><a href="{{el.get_absolute_url}}">{{el.title}}</a></li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock content %}